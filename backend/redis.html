<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>在 PHP 使用 Redis | MouWorks</title>
    <meta name="generator" content="VuePress 1.9.10">
    <link rel="icon" href="/logo.jpg">
    <link rel="manifest" href="/photo.jpg">
    <link rel="apple-touch-icon" href="/photo.jpg">
    <meta name="description" content="MouWorks">
    
    <link rel="preload" href="/assets/css/0.styles.7ccd9af3.css" as="style"><link rel="preload" href="/assets/js/app.3973fbd2.js" as="script"><link rel="preload" href="/assets/js/2.507abadc.js" as="script"><link rel="preload" href="/assets/js/1.057ff633.js" as="script"><link rel="preload" href="/assets/js/30.06d2f444.js" as="script"><link rel="prefetch" href="/assets/js/10.ab64adbc.js"><link rel="prefetch" href="/assets/js/11.fecf31c4.js"><link rel="prefetch" href="/assets/js/12.4c0cf6d4.js"><link rel="prefetch" href="/assets/js/13.a6220852.js"><link rel="prefetch" href="/assets/js/14.42035433.js"><link rel="prefetch" href="/assets/js/15.39efd926.js"><link rel="prefetch" href="/assets/js/16.438d9018.js"><link rel="prefetch" href="/assets/js/17.2954517c.js"><link rel="prefetch" href="/assets/js/18.e3b5d0a3.js"><link rel="prefetch" href="/assets/js/19.a75edfba.js"><link rel="prefetch" href="/assets/js/20.565d93d4.js"><link rel="prefetch" href="/assets/js/21.145b4049.js"><link rel="prefetch" href="/assets/js/22.cc57dd54.js"><link rel="prefetch" href="/assets/js/23.143fccce.js"><link rel="prefetch" href="/assets/js/24.f07be79a.js"><link rel="prefetch" href="/assets/js/25.dd69c476.js"><link rel="prefetch" href="/assets/js/26.d63a2e48.js"><link rel="prefetch" href="/assets/js/27.767f0928.js"><link rel="prefetch" href="/assets/js/28.ec22622f.js"><link rel="prefetch" href="/assets/js/29.57bdceb1.js"><link rel="prefetch" href="/assets/js/3.c4a2eff0.js"><link rel="prefetch" href="/assets/js/31.687982f3.js"><link rel="prefetch" href="/assets/js/32.4b1ffc3b.js"><link rel="prefetch" href="/assets/js/33.20da3610.js"><link rel="prefetch" href="/assets/js/34.4c2685dc.js"><link rel="prefetch" href="/assets/js/35.861de2a6.js"><link rel="prefetch" href="/assets/js/36.df44542a.js"><link rel="prefetch" href="/assets/js/37.5f9f975a.js"><link rel="prefetch" href="/assets/js/38.f1c9c658.js"><link rel="prefetch" href="/assets/js/39.7a33ba85.js"><link rel="prefetch" href="/assets/js/4.d0f2fa07.js"><link rel="prefetch" href="/assets/js/40.f7972adb.js"><link rel="prefetch" href="/assets/js/41.efdd1c66.js"><link rel="prefetch" href="/assets/js/42.7a75d690.js"><link rel="prefetch" href="/assets/js/43.ed798c33.js"><link rel="prefetch" href="/assets/js/44.e23e0330.js"><link rel="prefetch" href="/assets/js/45.863315fd.js"><link rel="prefetch" href="/assets/js/46.b8f59fdb.js"><link rel="prefetch" href="/assets/js/47.1483e337.js"><link rel="prefetch" href="/assets/js/48.d6043267.js"><link rel="prefetch" href="/assets/js/49.e7f2997c.js"><link rel="prefetch" href="/assets/js/5.eadb2fa0.js"><link rel="prefetch" href="/assets/js/50.fc5cddfe.js"><link rel="prefetch" href="/assets/js/51.aaf5db67.js"><link rel="prefetch" href="/assets/js/52.4d4e0f3b.js"><link rel="prefetch" href="/assets/js/53.62e46469.js"><link rel="prefetch" href="/assets/js/54.1a3a9054.js"><link rel="prefetch" href="/assets/js/55.0b5a51ea.js"><link rel="prefetch" href="/assets/js/56.6a936528.js"><link rel="prefetch" href="/assets/js/57.aa8e8a84.js"><link rel="prefetch" href="/assets/js/58.7e5a7c4e.js"><link rel="prefetch" href="/assets/js/59.da4e041c.js"><link rel="prefetch" href="/assets/js/6.4f47ee59.js"><link rel="prefetch" href="/assets/js/60.7e5b89c5.js"><link rel="prefetch" href="/assets/js/61.9556d30d.js"><link rel="prefetch" href="/assets/js/62.25dae01a.js"><link rel="prefetch" href="/assets/js/63.715176db.js"><link rel="prefetch" href="/assets/js/64.59ea6360.js"><link rel="prefetch" href="/assets/js/65.4586da1c.js"><link rel="prefetch" href="/assets/js/66.ca2e3f9a.js"><link rel="prefetch" href="/assets/js/67.5a79ab4e.js"><link rel="prefetch" href="/assets/js/68.70afe85a.js"><link rel="prefetch" href="/assets/js/69.5663ea35.js"><link rel="prefetch" href="/assets/js/7.e6743040.js"><link rel="prefetch" href="/assets/js/70.394c2301.js"><link rel="prefetch" href="/assets/js/71.c4e671f6.js"><link rel="prefetch" href="/assets/js/72.2215ac80.js"><link rel="prefetch" href="/assets/js/73.608c45b7.js"><link rel="prefetch" href="/assets/js/74.37472a69.js"><link rel="prefetch" href="/assets/js/75.b88c3bcc.js"><link rel="prefetch" href="/assets/js/76.f6352921.js"><link rel="prefetch" href="/assets/js/77.f0abd986.js"><link rel="prefetch" href="/assets/js/78.4559a1f8.js"><link rel="prefetch" href="/assets/js/79.28089e27.js"><link rel="prefetch" href="/assets/js/80.3d59fc16.js"><link rel="prefetch" href="/assets/js/81.4f1ecff0.js"><link rel="prefetch" href="/assets/js/82.902d577d.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.5e19b665.js">
    <link rel="stylesheet" href="/assets/css/0.styles.7ccd9af3.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">MouWorks</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="DevOps" class="dropdown-title"><span class="title">DevOps</span> <span class="arrow down"></span></button> <button type="button" aria-label="DevOps" class="mobile-dropdown-title"><span class="title">DevOps</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/devops/gcloud_container.html" class="nav-link">
  Gcloud in docker
</a></li><li class="dropdown-item"><!----> <a href="/devops/local_gitlab_runner.html" class="nav-link">
  Local gitlab Runner
</a></li><li class="dropdown-item"><!----> <a href="/devops/vm_cleanup.html" class="nav-link">
  VM Disk cleanup
</a></li><li class="dropdown-item"><!----> <a href="/devops/k8s_es_upgrade_note.html" class="nav-link">
  K8s ES Upgrade note
</a></li><li class="dropdown-item"><!----> <a href="/devops/dockerize.html" class="nav-link">
  DockerizeApplication
</a></li><li class="dropdown-item"><!----> <a href="/devops/graceful_shutdown.html" class="nav-link">
  Graceful shutdown
</a></li><li class="dropdown-item"><!----> <a href="/devops/linux.html" class="nav-link">
  Linux
</a></li><li class="dropdown-item"><!----> <a href="/devops/circleci.html" class="nav-link">
  CircleCI
</a></li><li class="dropdown-item"><!----> <a href="/devops/ansible.html" class="nav-link">
  Ansible
</a></li><li class="dropdown-item"><!----> <a href="/devops/deployer.html" class="nav-link">
  Deployer
</a></li><li class="dropdown-item"><!----> <a href="/devops/gke_cloud_onboard.html" class="nav-link">
  GKE Cloud onboard
</a></li><li class="dropdown-item"><!----> <a href="/devops/dcard_backend_scale.html" class="nav-link">
  Dcard Backend Scaling
</a></li><li class="dropdown-item"><!----> <a href="/devops/k8s.html" class="nav-link">
  k8s
</a></li><li class="dropdown-item"><!----> <a href="/devops/eks.html" class="nav-link">
  AWS EKS
</a></li><li class="dropdown-item"><!----> <a href="/devops/blackfire.html" class="nav-link">
  Blackfire效能監控
</a></li><li class="dropdown-item"><!----> <a href="/devops/aws_cdk.html" class="nav-link">
  AWS CDK
</a></li><li class="dropdown-item"><!----> <a href="/devops/k8s_note.html" class="nav-link">
  k8s Note
</a></li><li class="dropdown-item"><!----> <a href="/devops/pms.html" class="nav-link">
  prometheus
</a></li><li class="dropdown-item"><!----> <a href="/devops/k8s_course.html" class="nav-link">
  k8s Course
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Backend" class="dropdown-title"><span class="title">Backend</span> <span class="arrow down"></span></button> <button type="button" aria-label="Backend" class="mobile-dropdown-title"><span class="title">Backend</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/backend/ecmaScript.html" class="nav-link">
  ECMAScript
</a></li><li class="dropdown-item"><!----> <a href="/backend/nestjs.html" class="nav-link">
  NestJS
</a></li><li class="dropdown-item"><!----> <a href="/backend/DB_backup.html" class="nav-link">
  DB備份
</a></li><li class="dropdown-item"><!----> <a href="/backend/redis.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  Redis
</a></li><li class="dropdown-item"><!----> <a href="/backend/cassandra.html" class="nav-link">
  Cassandra
</a></li><li class="dropdown-item"><!----> <a href="/backend/socket.html" class="nav-link">
  Socket
</a></li><li class="dropdown-item"><!----> <a href="/backend/queue.html" class="nav-link">
  Queue
</a></li><li class="dropdown-item"><!----> <a href="/backend/upgrade_to_seven.html" class="nav-link">
  Php5升7
</a></li><li class="dropdown-item"><!----> <a href="/backend/nodejs.html" class="nav-link">
  Nodejs
</a></li><li class="dropdown-item"><!----> <a href="/backend/redisVsMc.html" class="nav-link">
  Redis Vs Memcached
</a></li><li class="dropdown-item"><!----> <a href="/backend/js_pattern.html" class="nav-link">
  JS 設計模式
</a></li><li class="dropdown-item"><!----> <a href="/backend/sql.html" class="nav-link">
  SQL練習
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="DB" class="dropdown-title"><span class="title">DB</span> <span class="arrow down"></span></button> <button type="button" aria-label="DB" class="mobile-dropdown-title"><span class="title">DB</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/protip/pg_cluster.html" class="nav-link">
  PG-cluster
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Protip" class="dropdown-title"><span class="title">Protip</span> <span class="arrow down"></span></button> <button type="button" aria-label="Protip" class="mobile-dropdown-title"><span class="title">Protip</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/protip/alias.html" class="nav-link">
  Alias
</a></li><li class="dropdown-item"><!----> <a href="/protip/makefile.html" class="nav-link">
  Makefile
</a></li><li class="dropdown-item"><!----> <a href="/protip/ssh_key.html" class="nav-link">
  SSH-Key
</a></li><li class="dropdown-item"><!----> <a href="/protip/setupscript.html" class="nav-link">
  SetupScript
</a></li><li class="dropdown-item"><!----> <a href="/protip/slowlog.html" class="nav-link">
  SlowLog
</a></li><li class="dropdown-item"><!----> <a href="/protip/logrotate.html" class="nav-link">
  logrotate
</a></li><li class="dropdown-item"><!----> <a href="/protip/php-fpm.html" class="nav-link">
  php-fpm
</a></li><li class="dropdown-item"><!----> <a href="/protip/ssh.html" class="nav-link">
  SSH &amp; SCP
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Resume" class="dropdown-title"><span class="title">Resume</span> <span class="arrow down"></span></button> <button type="button" aria-label="Resume" class="mobile-dropdown-title"><span class="title">Resume</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/resume/resume_2023.html" class="nav-link">
  Resume
</a></li><li class="dropdown-item"><!----> <a href="/resume/resume_2024.html" class="nav-link">
  Resume2024
</a></li><li class="dropdown-item"><!----> <a href="/resume/resume_chinese.html" class="nav-link">
  中文履歷
</a></li><li class="dropdown-item"><!----> <a href="/resume/resume.html" class="nav-link">
  _
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Study" class="dropdown-title"><span class="title">Study</span> <span class="arrow down"></span></button> <button type="button" aria-label="Study" class="mobile-dropdown-title"><span class="title">Study</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/study/data_structure.html" class="nav-link">
  資料結構
</a></li><li class="dropdown-item"><!----> <a href="/study/algo.html" class="nav-link">
  演算法
</a></li><li class="dropdown-item"><!----> <a href="/study/design_pattern.html" class="nav-link">
  設計模式
</a></li><li class="dropdown-item"><!----> <a href="/study/leetcodeAlgos.html" class="nav-link">
  LeetCodeAlgos
</a></li><li class="dropdown-item"><!----> <a href="/study/dailyInterviewPro.html" class="nav-link">
  DailyInterviewPro
</a></li><li class="dropdown-item"><!----> <a href="/study/jsdc_2017.html" class="nav-link">
  JSDC 2017 Note
</a></li><li class="dropdown-item"><!----> <a href="/devops/deployment_questions.html" class="nav-link">
  DeploymentQuestions
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="LeetCode" class="dropdown-title"><span class="title">LeetCode</span> <span class="arrow down"></span></button> <button type="button" aria-label="LeetCode" class="mobile-dropdown-title"><span class="title">LeetCode</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/leetCode/TwoSum_001.html" class="nav-link">
  001 | Easy | Two Sum
</a></li><li class="dropdown-item"><!----> <a href="/leetCode/RemoveElement_027.html" class="nav-link">
  027 | Easy | Remove Element
</a></li><li class="dropdown-item"><!----> <a href="/leetCode/BinarySearch_704.html" class="nav-link">
  704 | Easy | Binary Search
</a></li><li class="dropdown-item"><!----> <a href="/leetCode/SortedArraySquare_977.html" class="nav-link">
  977 | Easy | SortedArraySquare
</a></li><li class="dropdown-item"><!----> <a href="/leetCode/MinimumSizeSubArraySum_209.html" class="nav-link">
  209 | Easy | Minimum Size SubArray Sum
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Projects" class="dropdown-title"><span class="title">Projects</span> <span class="arrow down"></span></button> <button type="button" aria-label="Projects" class="mobile-dropdown-title"><span class="title">Projects</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/projects/jobHunter.html" class="nav-link">
  jobHunter
</a></li><li class="dropdown-item"><!----> <a href="/projects/m1ga.html" class="nav-link">
  M1GA
</a></li><li class="dropdown-item"><!----> <a href="/projects/weddinghelper.html" class="nav-link">
  WeddingHelper
</a></li></ul></div></div> <a href="https://github.com/mouworks" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="DevOps" class="dropdown-title"><span class="title">DevOps</span> <span class="arrow down"></span></button> <button type="button" aria-label="DevOps" class="mobile-dropdown-title"><span class="title">DevOps</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/devops/gcloud_container.html" class="nav-link">
  Gcloud in docker
</a></li><li class="dropdown-item"><!----> <a href="/devops/local_gitlab_runner.html" class="nav-link">
  Local gitlab Runner
</a></li><li class="dropdown-item"><!----> <a href="/devops/vm_cleanup.html" class="nav-link">
  VM Disk cleanup
</a></li><li class="dropdown-item"><!----> <a href="/devops/k8s_es_upgrade_note.html" class="nav-link">
  K8s ES Upgrade note
</a></li><li class="dropdown-item"><!----> <a href="/devops/dockerize.html" class="nav-link">
  DockerizeApplication
</a></li><li class="dropdown-item"><!----> <a href="/devops/graceful_shutdown.html" class="nav-link">
  Graceful shutdown
</a></li><li class="dropdown-item"><!----> <a href="/devops/linux.html" class="nav-link">
  Linux
</a></li><li class="dropdown-item"><!----> <a href="/devops/circleci.html" class="nav-link">
  CircleCI
</a></li><li class="dropdown-item"><!----> <a href="/devops/ansible.html" class="nav-link">
  Ansible
</a></li><li class="dropdown-item"><!----> <a href="/devops/deployer.html" class="nav-link">
  Deployer
</a></li><li class="dropdown-item"><!----> <a href="/devops/gke_cloud_onboard.html" class="nav-link">
  GKE Cloud onboard
</a></li><li class="dropdown-item"><!----> <a href="/devops/dcard_backend_scale.html" class="nav-link">
  Dcard Backend Scaling
</a></li><li class="dropdown-item"><!----> <a href="/devops/k8s.html" class="nav-link">
  k8s
</a></li><li class="dropdown-item"><!----> <a href="/devops/eks.html" class="nav-link">
  AWS EKS
</a></li><li class="dropdown-item"><!----> <a href="/devops/blackfire.html" class="nav-link">
  Blackfire效能監控
</a></li><li class="dropdown-item"><!----> <a href="/devops/aws_cdk.html" class="nav-link">
  AWS CDK
</a></li><li class="dropdown-item"><!----> <a href="/devops/k8s_note.html" class="nav-link">
  k8s Note
</a></li><li class="dropdown-item"><!----> <a href="/devops/pms.html" class="nav-link">
  prometheus
</a></li><li class="dropdown-item"><!----> <a href="/devops/k8s_course.html" class="nav-link">
  k8s Course
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Backend" class="dropdown-title"><span class="title">Backend</span> <span class="arrow down"></span></button> <button type="button" aria-label="Backend" class="mobile-dropdown-title"><span class="title">Backend</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/backend/ecmaScript.html" class="nav-link">
  ECMAScript
</a></li><li class="dropdown-item"><!----> <a href="/backend/nestjs.html" class="nav-link">
  NestJS
</a></li><li class="dropdown-item"><!----> <a href="/backend/DB_backup.html" class="nav-link">
  DB備份
</a></li><li class="dropdown-item"><!----> <a href="/backend/redis.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  Redis
</a></li><li class="dropdown-item"><!----> <a href="/backend/cassandra.html" class="nav-link">
  Cassandra
</a></li><li class="dropdown-item"><!----> <a href="/backend/socket.html" class="nav-link">
  Socket
</a></li><li class="dropdown-item"><!----> <a href="/backend/queue.html" class="nav-link">
  Queue
</a></li><li class="dropdown-item"><!----> <a href="/backend/upgrade_to_seven.html" class="nav-link">
  Php5升7
</a></li><li class="dropdown-item"><!----> <a href="/backend/nodejs.html" class="nav-link">
  Nodejs
</a></li><li class="dropdown-item"><!----> <a href="/backend/redisVsMc.html" class="nav-link">
  Redis Vs Memcached
</a></li><li class="dropdown-item"><!----> <a href="/backend/js_pattern.html" class="nav-link">
  JS 設計模式
</a></li><li class="dropdown-item"><!----> <a href="/backend/sql.html" class="nav-link">
  SQL練習
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="DB" class="dropdown-title"><span class="title">DB</span> <span class="arrow down"></span></button> <button type="button" aria-label="DB" class="mobile-dropdown-title"><span class="title">DB</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/protip/pg_cluster.html" class="nav-link">
  PG-cluster
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Protip" class="dropdown-title"><span class="title">Protip</span> <span class="arrow down"></span></button> <button type="button" aria-label="Protip" class="mobile-dropdown-title"><span class="title">Protip</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/protip/alias.html" class="nav-link">
  Alias
</a></li><li class="dropdown-item"><!----> <a href="/protip/makefile.html" class="nav-link">
  Makefile
</a></li><li class="dropdown-item"><!----> <a href="/protip/ssh_key.html" class="nav-link">
  SSH-Key
</a></li><li class="dropdown-item"><!----> <a href="/protip/setupscript.html" class="nav-link">
  SetupScript
</a></li><li class="dropdown-item"><!----> <a href="/protip/slowlog.html" class="nav-link">
  SlowLog
</a></li><li class="dropdown-item"><!----> <a href="/protip/logrotate.html" class="nav-link">
  logrotate
</a></li><li class="dropdown-item"><!----> <a href="/protip/php-fpm.html" class="nav-link">
  php-fpm
</a></li><li class="dropdown-item"><!----> <a href="/protip/ssh.html" class="nav-link">
  SSH &amp; SCP
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Resume" class="dropdown-title"><span class="title">Resume</span> <span class="arrow down"></span></button> <button type="button" aria-label="Resume" class="mobile-dropdown-title"><span class="title">Resume</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/resume/resume_2023.html" class="nav-link">
  Resume
</a></li><li class="dropdown-item"><!----> <a href="/resume/resume_2024.html" class="nav-link">
  Resume2024
</a></li><li class="dropdown-item"><!----> <a href="/resume/resume_chinese.html" class="nav-link">
  中文履歷
</a></li><li class="dropdown-item"><!----> <a href="/resume/resume.html" class="nav-link">
  _
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Study" class="dropdown-title"><span class="title">Study</span> <span class="arrow down"></span></button> <button type="button" aria-label="Study" class="mobile-dropdown-title"><span class="title">Study</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/study/data_structure.html" class="nav-link">
  資料結構
</a></li><li class="dropdown-item"><!----> <a href="/study/algo.html" class="nav-link">
  演算法
</a></li><li class="dropdown-item"><!----> <a href="/study/design_pattern.html" class="nav-link">
  設計模式
</a></li><li class="dropdown-item"><!----> <a href="/study/leetcodeAlgos.html" class="nav-link">
  LeetCodeAlgos
</a></li><li class="dropdown-item"><!----> <a href="/study/dailyInterviewPro.html" class="nav-link">
  DailyInterviewPro
</a></li><li class="dropdown-item"><!----> <a href="/study/jsdc_2017.html" class="nav-link">
  JSDC 2017 Note
</a></li><li class="dropdown-item"><!----> <a href="/devops/deployment_questions.html" class="nav-link">
  DeploymentQuestions
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="LeetCode" class="dropdown-title"><span class="title">LeetCode</span> <span class="arrow down"></span></button> <button type="button" aria-label="LeetCode" class="mobile-dropdown-title"><span class="title">LeetCode</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/leetCode/TwoSum_001.html" class="nav-link">
  001 | Easy | Two Sum
</a></li><li class="dropdown-item"><!----> <a href="/leetCode/RemoveElement_027.html" class="nav-link">
  027 | Easy | Remove Element
</a></li><li class="dropdown-item"><!----> <a href="/leetCode/BinarySearch_704.html" class="nav-link">
  704 | Easy | Binary Search
</a></li><li class="dropdown-item"><!----> <a href="/leetCode/SortedArraySquare_977.html" class="nav-link">
  977 | Easy | SortedArraySquare
</a></li><li class="dropdown-item"><!----> <a href="/leetCode/MinimumSizeSubArraySum_209.html" class="nav-link">
  209 | Easy | Minimum Size SubArray Sum
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Projects" class="dropdown-title"><span class="title">Projects</span> <span class="arrow down"></span></button> <button type="button" aria-label="Projects" class="mobile-dropdown-title"><span class="title">Projects</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/projects/jobHunter.html" class="nav-link">
  jobHunter
</a></li><li class="dropdown-item"><!----> <a href="/projects/m1ga.html" class="nav-link">
  M1GA
</a></li><li class="dropdown-item"><!----> <a href="/projects/weddinghelper.html" class="nav-link">
  WeddingHelper
</a></li></ul></div></div> <a href="https://github.com/mouworks" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>在 PHP 使用 Redis</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/backend/redis.html#命名規則" class="sidebar-link">命名規則</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/backend/redis.html#key-名稱不可過長" class="sidebar-link">key 名稱不可過長</a></li><li class="sidebar-sub-header"><a href="/backend/redis.html#key-名稱不要太短-保持可讀性" class="sidebar-link">key 名稱不要太短，保持可讀性</a></li><li class="sidebar-sub-header"><a href="/backend/redis.html#盡量保持一致的命名風格" class="sidebar-link">盡量保持一致的命名風格</a></li></ul></li><li><a href="/backend/redis.html#參考連結" class="sidebar-link">參考連結</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/backend/redis.html#開發規範" class="sidebar-link">開發規範</a></li><li class="sidebar-sub-header"><a href="/backend/redis.html#php-redis" class="sidebar-link">PHP Redis</a></li><li class="sidebar-sub-header"><a href="/backend/redis.html#php-redis-extension-安裝" class="sidebar-link">PHP redis extension 安裝</a></li></ul></li><li><a href="/backend/redis.html#其他-redis-事項" class="sidebar-link">其他 Redis 事項</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/backend/redis.html#config" class="sidebar-link">config</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="在-php-使用-redis"><a href="#在-php-使用-redis" class="header-anchor">#</a> 在 PHP 使用 Redis</h1> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p><strong>特別感謝</strong>  此為 <code>rainlay</code> 大分享技術筆記, 在此感謝! @https://github.com/rainlay</p></div> <h3 id="語法"><a href="#語法" class="header-anchor">#</a> 語法</h3> <div class="language-php line-numbers-mode"><pre class="language-php"><code><span class="token variable">$redis</span> <span class="token operator">=</span> <span class="token class-name static-context">Z_redis</span><span class="token operator">::</span><span class="token function">getClient</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>公司使用 <a href="https://github.com/phpredis/phpredis" target="_blank" rel="noopener noreferrer">phpredis extension<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 為 redis Client，
外部包了一層 Z_redis Library 方便連接 redis，已經設定在 ci 裡面 autoload</p> <p>如本機開發使用前需先安裝 php redis extension，安裝方式請參考<a href="https://github.com/phpredis/phpredis/blob/develop/INSTALL.markdown" target="_blank" rel="noopener noreferrer">官方文件<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><code>註:這裡其實也可以用一般的 composer 套件來連 redis, 但選擇 extension 的原因是為 php extension 都是用 C 來寫的，效能最好。</code></p> <h2 id="命名規則"><a href="#命名規則" class="header-anchor">#</a> 命名規則</h2> <p>建議以 : 號做為連接名字符號，大方向的命名方式可以使用 類型 + ID 來做命名。如:</p> <div class="language-json line-numbers-mode"><pre class="language-json"><code>user<span class="token operator">:</span><span class="token number">1</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>可解讀 Key user:1 為 user id = 1 的使用者資料。</p> <h3 id="key-名稱不可過長"><a href="#key-名稱不可過長" class="header-anchor">#</a> key 名稱不可過長</h3> <blockquote><p>Very long keys are not a good idea. For instance a key of 1024 bytes is a bad idea not only memory-wise, but also because the lookup of the key in the dataset may require several costly key-comparisons. Even when the task at hand is to match the existence of a large value,hashing it (for example with SHA1) is a better idea, especially from the perspective of memory and bandwidth.</p></blockquote> <h3 id="key-名稱不要太短-保持可讀性"><a href="#key-名稱不要太短-保持可讀性" class="header-anchor">#</a> key 名稱不要太短，保持可讀性</h3> <blockquote><p>Very short keys are often not a good idea. There is little point in writing &quot;u1000flw&quot; as a key if you can instead write &quot;user:1000:followers&quot;. The latter is more readable and the added space is minor compared to the space used by the key object itself and the value object. While short keys will obviously consume a bit less memory, your job is to find the right balance.</p></blockquote> <h3 id="盡量保持一致的命名風格"><a href="#盡量保持一致的命名風格" class="header-anchor">#</a> 盡量保持一致的命名風格</h3> <blockquote><p>Try to stick with a schema. For instance &quot;object-type:id&quot; is a good idea, as in &quot;user:1000&quot;. Dots or dashes are often used for multi-word fields, as in &quot;comment🔢reply.to&quot; or &quot;comment🔢reply-to&quot;.</p></blockquote> <h2 id="參考連結"><a href="#參考連結" class="header-anchor">#</a> 參考連結</h2> <h3 id="開發規範"><a href="#開發規範" class="header-anchor">#</a> 開發規範</h3> <p><a href="https://redis.io/topics/data-types-intro" target="_blank" rel="noopener noreferrer">An introduction to Redis data types and abstractions<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><a href="http://ju.outofmemory.cn/entry/218983" target="_blank" rel="noopener noreferrer">Redis开发规范一二三<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h3 id="php-redis"><a href="#php-redis" class="header-anchor">#</a> PHP Redis</h3> <p><a href="https://github.com/phpredis/phpredis" target="_blank" rel="noopener noreferrer">https://github.com/phpredis/phpredis<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h3 id="php-redis-extension-安裝"><a href="#php-redis-extension-安裝" class="header-anchor">#</a> PHP redis extension 安裝</h3> <p>如果你的 vagrant/server 還沒有裝 php redis extension ，請執行以下指令，這裡請注意你的 php 版本。</p> <ul><li>SSH 進入 Vagrant VM</li></ul> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">sudo</span> pecl <span class="token function">install</span> redis
<span class="token builtin class-name">echo</span> <span class="token parameter variable">-e</span> <span class="token string">&quot;; Redis PHP Driver<span class="token entity" title="\n">\n</span>extension=redis.so&quot;</span> <span class="token operator">&gt;&gt;</span> <span class="token variable"><span class="token variable">`</span>php <span class="token parameter variable">--ini</span> <span class="token operator">|</span> <span class="token function">grep</span> <span class="token string">&quot;Loaded Configuration&quot;</span> <span class="token operator">|</span> <span class="token function">sed</span> <span class="token parameter variable">-e</span> <span class="token string">&quot;s|.*:\s*||&quot;</span><span class="token variable">`</span></span>      
<span class="token builtin class-name">echo</span> <span class="token parameter variable">-e</span> <span class="token string">&quot;; Redis PHP Driver<span class="token entity" title="\n">\n</span>extension=redis.so&quot;</span> <span class="token operator">&gt;&gt;</span> /etc/php/7.1/fpm/php.ini
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><ul><li>別忘了重開 php-fpm</li></ul> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">service</span> php7.1-fpm restart
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="其他-redis-事項"><a href="#其他-redis-事項" class="header-anchor">#</a> 其他 Redis 事項</h2> <h3 id="config"><a href="#config" class="header-anchor">#</a> config</h3> <p>路徑</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>/etc/redis/config
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>Port 設定</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token builtin class-name">bind</span> <span class="token number">0.0</span>.0.0
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>log 位置/檔名</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>logfile <span class="token string">&quot;/var/lib/redis/redis.log&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>db 備份</p> <p>路徑</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">dir</span> /var/lib/redis
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>檔名</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>dbfilename dump.rdb
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>密碼設定</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>requirepass <span class="token punctuation">{</span>your_password<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.3973fbd2.js" defer></script><script src="/assets/js/2.507abadc.js" defer></script><script src="/assets/js/1.057ff633.js" defer></script><script src="/assets/js/30.06d2f444.js" defer></script>
  </body>
</html>
