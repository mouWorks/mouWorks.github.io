(window.webpackJsonp=window.webpackJsonp||[]).push([[34],{307:function(e,s,a){"use strict";a.r(s);var l=a(14),t=Object(l.a)({},(function(){var e=this,s=e.$createElement,a=e._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h1",{attrs:{id:"vm-clean-up"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#vm-clean-up"}},[e._v("#")]),e._v(" VM Clean up")]),e._v(" "),a("h3",{attrs:{id:"some-tips-for-free-up-spaces-on-linux-vm"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#some-tips-for-free-up-spaces-on-linux-vm"}},[e._v("#")]),e._v(" some tips for free up spaces on linux VM")]),e._v(" "),a("h4",{attrs:{id:"check-current-spaces-with-following-commands"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#check-current-spaces-with-following-commands"}},[e._v("#")]),e._v(" Check Current Spaces (with following commands)")]),e._v(" "),a("ul",[a("li",[e._v("list disk usage %")])]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("df-h\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("ul",[a("li",[e._v("check disk usage inside folder")])]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("sudo du -h --max-depth=1\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("h4",{attrs:{id:"free-up-commands"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#free-up-commands"}},[e._v("#")]),e._v(" Free Up Commands")]),e._v(" "),a("ul",[a("li",[a("code",[e._v("Jornal files")]),e._v(" "),a("ul",[a("li",[e._v("system logs, can goes up to 4G")])])])]),e._v(" "),a("ul",[a("li",[e._v("check current journal file sizes")])]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("journalctl --disk-usage\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("ul",[a("li",[e._v("only keep 300M, remove others")])]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("journalctl --vacuum-size=300M\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("ul",[a("li",[e._v("only keep 7 days journal files")])]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("journalctl --vacuum-time=7d\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("ul",[a("li"),e._v(" "),a("li",[a("p",[a("code",[e._v("Snap Packages")])])])]),e._v(" "),a("ul",[a("li",[e._v("show all snap packages")])]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("snap list --all\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("ul",[a("li",[e._v("list all disabled packages")])]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("LANG=en_US.UTF-8 snap list --all | awk '/disabled/{print $1, $3}\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("ul",[a("li",[e._v("remove deprecated google-cloud-sdk-packages")])]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("snap remove google-cloud-sdk --revision=264\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("ul",[a("li",[e._v("remove all "),a("em",[e._v("disabled")]),e._v(" snap packages.")])]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('LANG=C snap list --all | while read snapname ver rev trk pub notes; do if [[ $notes = *disabled* ]]; then sudo snap remove "$snapname" --revision="$rev"; fi; done\n')])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("ul",[a("li"),e._v(" "),a("li",[a("code",[e._v("Linux cleanup")])])]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("sudo apt-get autoremove\nsudo apt-get autoclean\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br")])]),a("h4",{attrs:{id:"enlarge-disk-spaces"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#enlarge-disk-spaces"}},[e._v("#")]),e._v(" Enlarge Disk Spaces")]),e._v(" "),a("ul",[a("li",[e._v("can be done "),a("em",[e._v("without")]),e._v(" VM restart/shutdown")])]),e._v(" "),a("ul",[a("li",[e._v("check current disk space")])]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("df -h\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("ul",[a("li",[e._v("check disk info")])]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("lsblk\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("ul",[a("li",[e._v("use growpart command")])]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("sudo growpart /dev/sda 1`\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("ul",[a("li",[e._v("use resize2fs command")])]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("sudo resize2fs /dev/sda1`\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("ul",[a("li",[e._v("use command to check disk space. should be changed now.")])]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("df -h\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])])])}),[],!1,null,null,null);s.default=t.exports}}]);