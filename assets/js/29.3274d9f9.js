(window.webpackJsonp=window.webpackJsonp||[]).push([[29],{300:function(e,t,a){"use strict";a.r(t);var s=a(14),r=Object(s.a)({},(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h1",{attrs:{id:"gke-cloud-onboard"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#gke-cloud-onboard"}},[e._v("#")]),e._v(" GKE Cloud Onboard")]),e._v(" "),a("ul",[a("li",[e._v("Declaritive configuration\n"),a("ul",[a("li",[e._v("Config as Code, IAC")]),e._v(" "),a("li",[e._v("You manage infra config, GKE handles how to achieve")])])])]),e._v(" "),a("p",[a("img",{attrs:{src:"https://i.imgur.com/ANbtzdd.jpg",alt:""}})]),e._v(" "),a("ul",[a("li",[e._v("Master Components")])]),e._v(" "),a("p",[a("img",{attrs:{src:"https://i.imgur.com/iL6122J.png",alt:""}})]),e._v(" "),a("h3",{attrs:{id:"pod"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#pod"}},[e._v("#")]),e._v(" Pod")]),e._v(" "),a("ul",[a("li",[a("p",[e._v("One pod share IP")]),e._v(" "),a("ul",[a("li",[e._v("use localhost to talk to each other inside pod")])])]),e._v(" "),a("li",[a("p",[e._v("pod yaml file\n"),a("img",{attrs:{src:"https://i.imgur.com/L4xGO2I.png",alt:""}})])]),e._v(" "),a("li",[a("p",[a("code",[e._v("pod")]),e._v(" VS "),a("code",[e._v("docker compose")])])])]),e._v(" "),a("h3",{attrs:{id:"volume"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#volume"}},[e._v("#")]),e._v(" Volume")]),e._v(" "),a("ul",[a("li",[e._v("Share and restore data.\n"),a("img",{attrs:{src:"https://i.imgur.com/KumDCWk.png",alt:""}})])]),e._v(" "),a("h3",{attrs:{id:"networking-between-pods"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#networking-between-pods"}},[e._v("#")]),e._v(" Networking between pods")]),e._v(" "),a("ul",[a("li",[e._v("GKE uses iptable\n"),a("img",{attrs:{src:"https://i.imgur.com/lSqv2qH.jpg",alt:""}})])]),e._v(" "),a("h3",{attrs:{id:"cluster-overview"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#cluster-overview"}},[e._v("#")]),e._v(" Cluster Overview")]),e._v(" "),a("p",[a("img",{attrs:{src:"https://i.imgur.com/7ie9Ich.png",alt:""}})]),e._v(" "),a("h4",{attrs:{id:"controllers"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#controllers"}},[e._v("#")]),e._v(" controllers")]),e._v(" "),a("h4",{attrs:{id:"apiserver"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#apiserver"}},[e._v("#")]),e._v(" apiserver")]),e._v(" "),a("h4",{attrs:{id:"etcd"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#etcd"}},[e._v("#")]),e._v(" etcd")]),e._v(" "),a("h4",{attrs:{id:"scheduler"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#scheduler"}},[e._v("#")]),e._v(" scheduler")]),e._v(" "),a("h4",{attrs:{id:"pod-provide-storage-and-network"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#pod-provide-storage-and-network"}},[e._v("#")]),e._v(" pod -> provide storage and network")]),e._v(" "),a("h4",{attrs:{id:"who-decides-where-to-run-pods"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#who-decides-where-to-run-pods"}},[e._v("#")]),e._v(" who decides where to run pods?")]),e._v(" "),a("ul",[a("li",[e._v("scheduler")])]),e._v(" "),a("h3",{attrs:{id:"gke-security"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#gke-security"}},[e._v("#")]),e._v(" GKE Security")]),e._v(" "),a("h4",{attrs:{id:"useraccount"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#useraccount"}},[e._v("#")]),e._v(" UserAccount")]),e._v(" "),a("ul",[a("li",[e._v("cannot user kubectl")])]),e._v(" "),a("h4",{attrs:{id:"serviceaccount"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#serviceaccount"}},[e._v("#")]),e._v(" ServiceAccount")]),e._v(" "),a("ul",[a("li",[e._v("only k8s entities")])]),e._v(" "),a("h3",{attrs:{id:"default-needs-to-tune"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#default-needs-to-tune"}},[e._v("#")]),e._v(" Default needs to tune")]),e._v(" "),a("p",[a("img",{attrs:{src:"https://i.imgur.com/Q3HLovF.jpg",alt:""}})]),e._v(" "),a("h1",{attrs:{id:""}},[a("a",{staticClass:"header-anchor",attrs:{href:"#"}},[e._v("#")])]),e._v(" "),a("p",[a("img",{attrs:{src:"https://i.imgur.com/qlljcdj.png",alt:""}})]),e._v(" "),a("ul",[a("li",[e._v("Security\n"),a("ul",[a("li",[e._v("project")]),e._v(" "),a("li",[e._v("applicaton")]),e._v(" "),a("li",[e._v("cluster")])])])]),e._v(" "),a("h4",{attrs:{id:"-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#-2"}},[e._v("#")])]),e._v(" "),a("ol",[a("li",[e._v("export ${PROJECT_ID}")]),e._v(" "),a("li",[e._v("docker build and just push to gcr")])]),e._v(" "),a("h4",{attrs:{id:"steps"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#steps"}},[e._v("#")]),e._v(" Steps:")]),e._v(" "),a("ol",[a("li",[e._v("enable registry api:")])]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("gcloud service enable containerregistry.googleapi.com\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("ol",{attrs:{start:"2"}},[a("li",[e._v("authorize docker")])]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("gcloud auth configure-docker\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("ol",{attrs:{start:"3"}},[a("li",[e._v("push")])]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("docker push gcr.io/${PROJECT_ID}/hello-app:v1\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("h4",{attrs:{id:"spinup-gke"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#spinup-gke"}},[e._v("#")]),e._v(" Spinup GKE")]),e._v(" "),a("ul",[a("li",[e._v("init k8s cluster")])]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("gcloud container clusters create cliuster-1 --num-nodes 3\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("ul",[a("li",[e._v("create deployment")])]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("kubectl create deployment hello-app --image=gcr.io/${project_ID}/hello-app/v1\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("ul",[a("li",[e._v("expose deployment")])]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("kubectl expose deployment hello-app --name hello-app-service --type=LocaBalancer --port 80 --target-port 8080\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("ul",[a("li",[e._v("list all service")])]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("kubectl get service\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("ul",[a("li",[e._v("list all pods")])]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("kubectl get pods\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("ul",[a("li",[e._v("scale")])]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("kubectl scale deployment ${deployment-name} --replica=3\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("ul",[a("li",[e._v("set auto-scale")])]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("kubectl autoscale deployment helo-app --cpu-precent=80 --min=1 --max=5\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("h3",{attrs:{id:"anthos"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#anthos"}},[e._v("#")]),e._v(" Anthos")]),e._v(" "),a("p",[a("img",{attrs:{src:"https://i.imgur.com/vJFpY7K.jpg",alt:""}})]),e._v(" "),a("p",[a("img",{attrs:{src:"https://i.imgur.com/e16XD6n.png",alt:""}})]),e._v(" "),a("h3",{attrs:{id:"knative"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#knative"}},[e._v("#")]),e._v(" Knative")]),e._v(" "),a("ul",[a("li",[e._v("build/run/deploy serverless")]),e._v(" "),a("li",[e._v("cloud run for anthos")])]),e._v(" "),a("h3",{attrs:{id:"comparison"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#comparison"}},[e._v("#")]),e._v(" Comparison")]),e._v(" "),a("p",[a("img",{attrs:{src:"https://i.imgur.com/Qn1bVk8.png",alt:""}})]),e._v(" "),a("ul",[a("li",[e._v("convert docker-compose to gke\nhttps://kubernetes.io/docs/tasks/configure-pod-container/translate-compose-kubernetes/")])])])}),[],!1,null,null,null);t.default=r.exports}}]);