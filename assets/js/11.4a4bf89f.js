(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{211:function(s,e,a){"use strict";a.r(e);var t=a(0),r=Object(t.a)({},(function(){var s=this,e=s.$createElement,a=s._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"åœ¨-php-ä½¿ç”¨-redis"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#åœ¨-php-ä½¿ç”¨-redis"}},[s._v("#")]),s._v(" åœ¨ PHP ä½¿ç”¨ Redis")]),s._v(" "),a("div",{staticClass:"tip custom-block"},[a("p",{staticClass:"custom-block-title"},[s._v("TIP")]),s._v(" "),a("p",[a("strong",[s._v("ç‰¹åˆ¥æ„Ÿè¬")]),s._v("  æ­¤ç‚º "),a("code",[s._v("rainlay")]),s._v(" å¤§åˆ†äº«æŠ€è¡“ç­†è¨˜, åœ¨æ­¤æ„Ÿè¬! @https://github.com/rainlay")])]),s._v(" "),a("h3",{attrs:{id:"èªæ³•"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#èªæ³•"}},[s._v("#")]),s._v(" èªæ³•")]),s._v(" "),a("div",{staticClass:"language-php line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$redis")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" Z_redis"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("getClient")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("å…¬å¸ä½¿ç”¨ "),a("a",{attrs:{href:"https://github.com/phpredis/phpredis",target:"_blank",rel:"noopener noreferrer"}},[s._v("phpredis extension"),a("OutboundLink")],1),s._v(" ç‚º redis Clientï¼Œ\nå¤–éƒ¨åŒ…äº†ä¸€å±¤ Z_redis Library æ–¹ä¾¿é€£æ¥ redisï¼Œå·²ç¶“è¨­å®šåœ¨ ci è£¡é¢ autoload")]),s._v(" "),a("p",[s._v("å¦‚æœ¬æ©Ÿé–‹ç™¼ä½¿ç”¨å‰éœ€å…ˆå®‰è£ php redis extensionï¼Œå®‰è£æ–¹å¼è«‹åƒè€ƒ"),a("a",{attrs:{href:"https://github.com/phpredis/phpredis/blob/develop/INSTALL.markdown",target:"_blank",rel:"noopener noreferrer"}},[s._v("å®˜æ–¹æ–‡ä»¶"),a("OutboundLink")],1)]),s._v(" "),a("p",[a("code",[s._v("è¨»:é€™è£¡å…¶å¯¦ä¹Ÿå¯ä»¥ç”¨ä¸€èˆ¬çš„ composer å¥—ä»¶ä¾†é€£ redis, ä½†é¸æ“‡ extension çš„åŸå› æ˜¯ç‚º php extension éƒ½æ˜¯ç”¨ C ä¾†å¯«çš„ï¼Œæ•ˆèƒ½æœ€å¥½ã€‚")])]),s._v(" "),a("h2",{attrs:{id:"å‘½åè¦å‰‡"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#å‘½åè¦å‰‡"}},[s._v("#")]),s._v(" å‘½åè¦å‰‡")]),s._v(" "),a("p",[s._v("å»ºè­°ä»¥ : è™Ÿåšç‚ºé€£æ¥åå­—ç¬¦è™Ÿï¼Œå¤§æ–¹å‘çš„å‘½åæ–¹å¼å¯ä»¥ä½¿ç”¨ é¡å‹ + ID ä¾†åšå‘½åã€‚å¦‚:")]),s._v(" "),a("div",{staticClass:"language-json line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[s._v("user"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("å¯è§£è®€ Key user:1 ç‚º user id = 1 çš„ä½¿ç”¨è€…è³‡æ–™ã€‚")]),s._v(" "),a("h3",{attrs:{id:"key-åç¨±ä¸å¯éé•·"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#key-åç¨±ä¸å¯éé•·"}},[s._v("#")]),s._v(" key åç¨±ä¸å¯éé•·")]),s._v(" "),a("blockquote",[a("p",[s._v("Very long keys are not a good idea. For instance a key of 1024 bytes is a bad idea not only memory-wise, but also because the lookup of the key in the dataset may require several costly key-comparisons. Even when the task at hand is to match the existence of a large value,hashing it (for example with SHA1) is a better idea, especially from the perspective of memory and bandwidth.")])]),s._v(" "),a("h3",{attrs:{id:"key-åç¨±ä¸è¦å¤ªçŸ­ï¼Œä¿æŒå¯è®€æ€§"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#key-åç¨±ä¸è¦å¤ªçŸ­ï¼Œä¿æŒå¯è®€æ€§"}},[s._v("#")]),s._v(" key åç¨±ä¸è¦å¤ªçŸ­ï¼Œä¿æŒå¯è®€æ€§")]),s._v(" "),a("blockquote",[a("p",[s._v('Very short keys are often not a good idea. There is little point in writing "u1000flw" as a key if you can instead write "user:1000:followers". The latter is more readable and the added space is minor compared to the space used by the key object itself and the value object. While short keys will obviously consume a bit less memory, your job is to find the right balance.')])]),s._v(" "),a("h3",{attrs:{id:"ç›¡é‡ä¿æŒä¸€è‡´çš„å‘½åé¢¨æ ¼"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ç›¡é‡ä¿æŒä¸€è‡´çš„å‘½åé¢¨æ ¼"}},[s._v("#")]),s._v(" ç›¡é‡ä¿æŒä¸€è‡´çš„å‘½åé¢¨æ ¼")]),s._v(" "),a("blockquote",[a("p",[s._v('Try to stick with a schema. For instance "object-type:id" is a good idea, as in "user:1000". Dots or dashes are often used for multi-word fields, as in "commentğŸ”¢reply.to" or "commentğŸ”¢reply-to".')])]),s._v(" "),a("h2",{attrs:{id:"åƒè€ƒé€£çµ"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#åƒè€ƒé€£çµ"}},[s._v("#")]),s._v(" åƒè€ƒé€£çµ")]),s._v(" "),a("h3",{attrs:{id:"é–‹ç™¼è¦ç¯„"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#é–‹ç™¼è¦ç¯„"}},[s._v("#")]),s._v(" é–‹ç™¼è¦ç¯„")]),s._v(" "),a("p",[a("a",{attrs:{href:"https://redis.io/topics/data-types-intro",target:"_blank",rel:"noopener noreferrer"}},[s._v("An introduction to Redis data types and abstractions"),a("OutboundLink")],1)]),s._v(" "),a("p",[a("a",{attrs:{href:"http://ju.outofmemory.cn/entry/218983",target:"_blank",rel:"noopener noreferrer"}},[s._v("Rediså¼€å‘è§„èŒƒä¸€äºŒä¸‰"),a("OutboundLink")],1)]),s._v(" "),a("h3",{attrs:{id:"php-redis"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#php-redis"}},[s._v("#")]),s._v(" PHP Redis")]),s._v(" "),a("p",[a("a",{attrs:{href:"https://github.com/phpredis/phpredis",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://github.com/phpredis/phpredis"),a("OutboundLink")],1)]),s._v(" "),a("h3",{attrs:{id:"php-redis-extension-å®‰è£"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#php-redis-extension-å®‰è£"}},[s._v("#")]),s._v(" PHP redis extension å®‰è£")]),s._v(" "),a("p",[s._v("å¦‚æœä½ çš„ vagrant/server é‚„æ²’æœ‰è£ php redis extension ï¼Œè«‹åŸ·è¡Œä»¥ä¸‹æŒ‡ä»¤ï¼Œé€™è£¡è«‹æ³¨æ„ä½ çš„ php ç‰ˆæœ¬ã€‚")]),s._v(" "),a("ul",[a("li",[s._v("SSH é€²å…¥ Vagrant VM")])]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" pecl "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" redis\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" -e "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"; Redis PHP Driver'),a("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),s._v('extension=redis.so"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),s._v("php --ini "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Loaded Configuration"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sed")]),s._v(" -e "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"s|.*:\\s*||"')]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v("      \n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" -e "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"; Redis PHP Driver'),a("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),s._v('extension=redis.so"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),s._v(" /etc/php/7.1/fpm/php.ini\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("ul",[a("li",[s._v("åˆ¥å¿˜äº†é‡é–‹ php-fpm")])]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("service")]),s._v(" php7.1-fpm restart\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h2",{attrs:{id:"å…¶ä»–-redis-äº‹é …"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#å…¶ä»–-redis-äº‹é …"}},[s._v("#")]),s._v(" å…¶ä»– Redis äº‹é …")]),s._v(" "),a("h3",{attrs:{id:"config"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#config"}},[s._v("#")]),s._v(" config")]),s._v(" "),a("p",[s._v("è·¯å¾‘")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("/etc/redis/config\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("Port è¨­å®š")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("bind")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(".0.0\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("log ä½ç½®/æª”å")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("logfile "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/var/lib/redis/redis.log"')]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("db å‚™ä»½")]),s._v(" "),a("p",[s._v("è·¯å¾‘")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("dir")]),s._v(" /var/lib/redis\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("æª”å")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("dbfilename dump.rdb\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("å¯†ç¢¼è¨­å®š")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("requirepass "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("your_password"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])])])}),[],!1,null,null,null);e.default=r.exports}}]);