(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{215:function(e,a,s){"use strict";s.r(a);var r=s(0),t=Object(r.a)({},(function(){var e=this,a=e.$createElement,s=e._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[s("h1",{attrs:{id:"k8s-workshop"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#k8s-workshop","aria-hidden":"true"}},[e._v("#")]),e._v(" k8s Workshop")]),e._v(" "),s("h3",{attrs:{id:"簡單實作一個docker-的-web-app-docker-w-python"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#簡單實作一個docker-的-web-app-docker-w-python","aria-hidden":"true"}},[e._v("#")]),e._v(" 簡單實作一個Docker 的 Web App (Docker w/Python)")]),e._v(" "),s("h4",{attrs:{id:"docker-練習"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#docker-練習","aria-hidden":"true"}},[e._v("#")]),e._v(" Docker 練習")]),e._v(" "),s("ul",[s("li",[s("p",[e._v("GCP 相關")])]),e._v(" "),s("li",[s("p",[e._v("取得 GCP project name")])])]),e._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("export GCP_PROJECT=`gcloud config list core/project --format='value(core.project)'`\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br")])]),s("ul",[s("li",[e._v("設定好權限")])]),e._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("PATH=/usr/lib/google-cloud-sdk/bin:$PATH\ngcloud auth configure-docker\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br"),s("span",{staticClass:"line-number"},[e._v("2")]),s("br")])]),s("ul",[s("li",[e._v("將build好的 container 推到 GCR (需要先設定好權限)")])]),e._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("docker push gcr.io/${GCP_PROJECT}/py-web-server:v1\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br")])]),s("ul",[s("li",[e._v("上傳完畢, 用指令去調整 GCR上面 container 的權限")])]),e._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("gsutil defacl ch -u AllUsers:R gs://artifacts.${GCP_PROJECT}.appspot.com\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br")])]),s("h4",{attrs:{id:"遠端直接用"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#遠端直接用","aria-hidden":"true"}},[e._v("#")]),e._v(" 遠端直接用")]),e._v(" "),s("ul",[s("li",[e._v("當你的GCR Container 設定好可外部存取時, 就可以直接On起來啟動.")])]),e._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("docker run -d -p 8888:8888 -h my-web-server gcr.io/${GCP_PROJECT}/py-web-server:v1\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br")])])])}),[],!1,null,null,null);a.default=t.exports}}]);